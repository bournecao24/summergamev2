<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Summer Games Festival - Play Exciting Online Games</title>
    <meta name="description" content="Experience the best collection of online games at Summer Games Festival. Play exciting games for free with no downloads required.">
    <link rel="canonical" href="https://summergamesfesttime.pro/">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-454LJVW4ZS"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-454LJVW4ZS');
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        apple: {
                            blue: '#007AFF',
                            indigo: '#5856D6',
                            purple: '#AF52DE',
                            pink: '#FF2D55',
                            red: '#FF3B30',
                            orange: '#FF9500',
                            yellow: '#FFCC00',
                            green: '#34C759',
                            teal: '#5AC8FA',
                            gray: {
                                100: '#F2F2F7',
                                200: '#E5E5EA',
                                300: '#D1D1D6',
                                400: '#C7C7CC',
                                500: '#AEAEB2',
                                600: '#8E8E93',
                                700: '#636366',
                                800: '#48484A',
                                900: '#3A3A3C',
                                950: '#1C1C1E',
                            }
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/css">
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }
        .game-container {
            aspect-ratio: 16/9;
            width: 100%;
            max-width: 1024px;
            margin: 0 auto;
            position: relative;
        }
        .game-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        .game-error {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 2rem;
            z-index: 10;
            display: none;
        }
        .game-error-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: #FF3B30;
        }
        .game-error-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        .game-error-message {
            margin-bottom: 1.5rem;
            max-width: 500px;
        }
        .retry-button {
            background-color: #007AFF;
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 9999px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .retry-button:hover {
            background-color: #0062CC;
        }
        .game-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .game-card img {
            aspect-ratio: 16/9;
            object-fit: cover;
        }
        .category-badge {
            font-size: 0.7rem;
            padding: 0.2rem 0.5rem;
            border-radius: 9999px;
        }
        .game-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 50;
            overflow-y: auto;
        }
        .modal-content {
            width: 90%;
            max-width: 1200px;
            margin: 5vh auto;
            background-color: white;
            border-radius: 0.5rem;
            position: relative;
        }
        .dark .modal-content {
            background-color: #1C1C1E;
        }
        .close-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 60;
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 9999px;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
        }
        .language-selector {
            position: relative;
            cursor: pointer;
        }
        .language-dropdown {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            z-index: 40;
            min-width: 120px;
            overflow: hidden;
            margin-top: 0.5rem;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        .dark .language-dropdown {
            background-color: #1C1C1E;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .language-selector.active .language-dropdown {
            display: block;
        }
        .language-option {
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
            color: #1C1C1E;
            font-weight: 500;
        }
        .dark .language-option {
            color: #F2F2F7;
        }
        .language-option:hover {
            background-color: #007AFF;
            color: white;
        }
        .dark .language-option:hover {
            background-color: #007AFF;
            color: white;
        }
    </style>
</head>
<body class="bg-apple-gray-100 dark:bg-apple-gray-950 text-apple-gray-900 dark:text-white">
    <header class="bg-gradient-to-r from-apple-blue to-apple-indigo text-white py-6 px-4 md:px-8 shadow-lg">
        <div class="container mx-auto">
            <div class="flex justify-between items-center mb-4">
                <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold">
                    <span class="lang-en">Summer Games Festival</span>
                    <span class="lang-zh hidden">夏日游戏节</span>
                </h1>
                <div class="language-selector" id="language-selector">
                    <button class="flex items-center bg-white/30 hover:bg-white/40 px-4 py-2 rounded-full text-sm font-medium" id="language-toggle">
                        <span id="current-language">English</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </button>
                    <div class="language-dropdown">
                        <div class="language-option" data-lang="en">English</div>
                        <div class="language-option" data-lang="zh">中文</div>
                    </div>
                </div>
            </div>
            <p class="text-lg md:text-xl text-center max-w-3xl mx-auto">
                <span class="lang-en">Your ultimate destination for free online games!</span>
                <span class="lang-zh hidden">您的免费在线游戏终极目的地！</span>
            </p>
            <div class="flex justify-center mt-4 gap-2 flex-wrap">
                <button class="category-filter bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full text-sm" data-category="all">
                    <span class="lang-en">All Games</span>
                    <span class="lang-zh hidden">所有游戏</span>
                </button>
                <button class="category-filter bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full text-sm" data-category="action">
                    <span class="lang-en">Action</span>
                    <span class="lang-zh hidden">动作</span>
                </button>
                <button class="category-filter bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full text-sm" data-category="casual">
                    <span class="lang-en">Casual</span>
                    <span class="lang-zh hidden">休闲</span>
                </button>
                <button class="category-filter bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full text-sm" data-category="puzzle">
                    <span class="lang-en">Puzzle</span>
                    <span class="lang-zh hidden">益智</span>
                </button>
                <button class="category-filter bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full text-sm" data-category="adventure">
                    <span class="lang-en">Adventure</span>
                    <span class="lang-zh hidden">冒险</span>
                </button>
                <button class="category-filter bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full text-sm" data-category="driving">
                    <span class="lang-en">Driving</span>
                    <span class="lang-zh hidden">驾驶</span>
                </button>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 md:px-8">
        <!-- 首页置顶游戏 - Crazy Office: Slap and Smash! -->
        <section class="mb-12">
            <h2 class="text-2xl md:text-3xl font-bold mb-4 text-apple-blue dark:text-apple-teal">
                <span class="lang-en">Featured Game</span>
                <span class="lang-zh hidden">精选游戏</span>
            </h2>
            <div class="game-container bg-apple-gray-200 dark:bg-apple-gray-800 rounded-lg shadow-lg overflow-hidden">
                <iframe 
                    id="featured-game-iframe"
                    src="https://www.crazygames.com/embed/crazy-office-slap-and-smash" 
                    class="game-iframe"
                    title="Crazy Office: Slap and Smash!"
                    allow="fullscreen; gamepad *;"
                    loading="lazy">
                </iframe>
                <div id="featured-game-error" class="game-error">
                    <div class="game-error-icon">⚠️</div>
                    <div class="game-error-title">
                        <span class="lang-en">Connection Issues</span>
                        <span class="lang-zh hidden">连接问题</span>
                    </div>
                    <div class="game-error-message">
                        <span class="lang-en">Oops, we're having troubles connecting you. Try reloading the game to solve the issue.</span>
                        <span class="lang-zh hidden">糟糕，我们连接出现问题。请尝试重新加载游戏来解决此问题。</span>
                    </div>
                    <button id="featured-game-retry" class="retry-button">
                        <span class="lang-en">Reload Game</span>
                        <span class="lang-zh hidden">重新加载游戏</span>
                    </button>
                </div>
            </div>
            <div class="bg-white dark:bg-apple-gray-800 p-4 rounded-lg shadow-md mt-4">
                <h3 class="text-xl font-bold">Crazy Office: Slap and Smash!</h3>
                <div class="flex gap-2 mt-1">
                    <span class="category-badge bg-apple-red text-white">Action</span>
                    <span class="category-badge bg-apple-blue text-white">Casual</span>
                </div>
                <p class="mt-3">
                    <span class="lang-en">Experience the hilarious chaos of office life gone crazy! Slap, smash, and cause mayhem in this action-packed game.</span>
                    <span class="lang-zh hidden">体验办公室生活的疯狂混乱！在这款充满动感的游戏中尽情扇巴掌、砸东西，制造混乱。</span>
                </p>
            </div>
        </section>

        <section class="mb-12">
            <h2 class="text-2xl md:text-3xl font-bold mb-6 text-apple-blue dark:text-apple-teal">
                <span class="lang-en">More Games</span>
                <span class="lang-zh hidden">更多游戏</span>
            </h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6" id="games-container">
                <!-- Game cards will be dynamically generated here -->
            </div>
        </section>
    </main>

    <footer class="bg-gradient-to-r from-apple-blue to-apple-indigo text-white py-8 px-4">
        <div class="container mx-auto max-w-4xl">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <h2 class="text-xl font-bold">
                        <span class="lang-en">Summer Games Festival</span>
                        <span class="lang-zh hidden">夏日游戏节</span>
                    </h2>
                    <p class="text-sm opacity-75">
                        <span class="lang-en">The ultimate gaming experience</span>
                        <span class="lang-zh hidden">极致游戏体验</span>
                    </p>
                </div>
                <div class="text-center md:text-right">
                    <p>&copy; 2023 Summer Games Festival. All rights reserved.</p>
                    <p class="text-sm opacity-75 mt-1">
                        <span class="lang-en">Play responsibly and have fun!</span>
                        <span class="lang-zh hidden">理性游戏，尽情享乐！</span>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Game Modal -->
    <div id="game-modal" class="game-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="p-4">
                <h2 id="modal-game-title" class="text-2xl font-bold text-apple-blue dark:text-apple-teal mb-2"></h2>
                <div class="flex gap-2 mb-4">
                    <span id="modal-game-categories" class="text-sm text-apple-gray-600 dark:text-apple-gray-400"></span>
                </div>
                <div class="game-container bg-apple-gray-200 dark:bg-apple-gray-800 rounded-lg overflow-hidden mb-4">
                    <div id="game-iframe-container" class="w-full h-full"></div>
                    <div id="modal-game-error" class="game-error">
                        <div class="game-error-icon">⚠️</div>
                        <div class="game-error-title">
                            <span class="lang-en">Connection Issues</span>
                            <span class="lang-zh hidden">连接问题</span>
                        </div>
                        <div class="game-error-message">
                            <span class="lang-en">Oops, we're having troubles connecting you. Try reloading the game to solve the issue.</span>
                            <span class="lang-zh hidden">糟糕，我们连接出现问题。请尝试重新加载游戏来解决此问题。</span>
                        </div>
                        <button id="modal-game-retry" class="retry-button">
                            <span class="lang-en">Reload Game</span>
                            <span class="lang-zh hidden">重新加载游戏</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 语言设置
        let currentLanguage = 'en';
        
        // 当前正在加载的游戏iframe
        let currentGameIframe = null;
        let currentGameSlug = null;

        // 语言选择器功能
        const languageToggle = document.getElementById('language-toggle');
        const languageSelector = document.getElementById('language-selector');
        
        // 点击语言选择按钮
        languageToggle.addEventListener('click', function(e) {
            e.stopPropagation(); // 阻止事件冒泡
            languageSelector.classList.toggle('active');
        });
        
        // 点击文档其他部分关闭下拉菜单
        document.addEventListener('click', function(e) {
            if (!languageSelector.contains(e.target)) {
                languageSelector.classList.remove('active');
            }
        });
        
        // 切换语言
        function switchLanguage(lang) {
            currentLanguage = lang;
            document.getElementById('current-language').textContent = lang === 'en' ? 'English' : '中文';
            
            // 隐藏所有语言元素
            document.querySelectorAll('.lang-en, .lang-zh').forEach(el => {
                el.classList.add('hidden');
            });
            
            // 显示当前语言元素
            document.querySelectorAll(`.lang-${lang}`).forEach(el => {
                el.classList.remove('hidden');
            });
            
            // 关闭下拉菜单
            languageSelector.classList.remove('active');

            // 重新渲染游戏卡片以更新语言
            renderGames(currentGames);
        }

        // 添加语言切换事件监听
        document.querySelectorAll('.language-option').forEach(option => {
            option.addEventListener('click', function(e) {
                e.stopPropagation(); // 阻止事件冒泡
                const lang = this.getAttribute('data-lang');
                switchLanguage(lang);
            });
        });

        // 游戏数据（中英文）
        const gamesData = [
            {
                name: "Crazy Office: Slap and Smash!",
                nameZh: "疯狂办公室：拍打与砸碎！",
                slug: "crazy-office-slap-and-smash",
                imageUrl: "https://imgs.crazygames.com/crazy-office-slap-and-smash_16x9/20250425071328/crazy-office-slap-and-smash_16x9-cover?metadata=none&quality=40&width=1200&height=630&fit=crop",
                embedUrl: '<iframe src="https://www.crazygames.com/embed/crazy-office-slap-and-smash" style="width: 100%; height: 100%;" frameborder="0" allow="gamepad *;"></iframe>',
                categories: ["action", "casual"]
            },
            {
                name: "Piece of Cake: Merge and Bake",
                nameZh: "小菜一碟：合并与烘焙",
                slug: "piece-of-cake-merge-and-bake",
                imageUrl: "https://imgs.crazygames.com/piece-of-cake-merge-and-bake_16x9/20250528043012/piece-of-cake-merge-and-bake_16x9-cover?metadata=none&quality=40&width=1200&height=630&fit=crop",
                embedUrl: '<iframe src="https://www.crazygames.com/embed/piece-of-cake-merge-and-bake" style="width: 100%; height: 100%;" frameborder="0" allow="gamepad *;"></iframe>',
                categories: ["casual", "puzzle"]
            },
            {
                name: "Doodle Road",
                nameZh: "涂鸦之路",
                slug: "doodle-road",
                imageUrl: "https://imgs.crazygames.com/doodle-road_16x9/20240912101139/doodle-road_16x9-cover?metadata=none&quality=40&width=1200&height=630&fit=crop",
                embedUrl: '<iframe src="https://www.crazygames.com/embed/doodle-road" style="width: 100%; height: 100%;" frameborder="0" allow="gamepad *;"></iframe>',
                categories: ["casual"]
            },
            {
                name: "Zombie Horde: Build & Survive",
                nameZh: "僵尸群：建造与生存",
                slug: "zombie-horde-build-survive",
                imageUrl: "https://imgs.crazygames.com/zombie-horde-build-survive_16x9/20250602073747/zombie-horde-build-survive_16x9-cover?metadata=none&quality=40&width=1200&height=630&fit=crop",
                embedUrl: '<iframe src="https://www.crazygames.com/embed/zombie-horde-build-survive" style="width: 100%; height: 100%;" frameborder="0" allow="gamepad *;"></iframe>',
                categories: ["action"]
            },
            {
                name: "Crazy Dummy Swing Multiplayer",
                nameZh: "疯狂假人秋千多人游戏",
                slug: "crazy-dummy-swing-multiplayer",
                imageUrl: "https://imgs.crazygames.com/games/crazy-dummy-swing-multiplayer/cover_16x9-1747406523876.png?metadata=none&quality=40&width=1200&height=630&fit=crop",
                embedUrl: '<iframe src="https://www.crazygames.com/embed/crazy-dummy-swing-multiplayer" style="width: 100%; height: 100%;" frameborder="0" allow="gamepad *;"></iframe>',
                categories: ["casual"]
            },
            {
                name: "Boom Karts",
                nameZh: "爆炸卡丁车",
                slug: "boom-karts",
                imageUrl: "https://imgs.crazygames.com/boom-karts_16x9/20250522041619/boom-karts_16x9-cover?metadata=none&quality=40&width=1200&height=630&fit=crop",
                embedUrl: '<iframe src="https://www.crazygames.com/embed/boom-karts" style="width: 100%; height: 100%;" frameborder="0" allow="gamepad *;"></iframe>',
                categories: ["driving"]
            },
            {
                name: "Bad Cat - Granny's Return",
                nameZh: "坏猫咪 - 老奶奶的回归",
                slug: "bad-cat---granny-s-return",
                imageUrl: "https://imgs.crazygames.com/bad-cat---granny-s-return_16x9/20250409102849/bad-cat---granny-s-return_16x9-cover?metadata=none&quality=40&width=1200&height=630&fit=crop",
                embedUrl: '<iframe src="https://www.crazygames.com/embed/bad-cat---granny-s-return" style="width: 100%; height: 100%;" frameborder="0" allow="gamepad *;"></iframe>',
                categories: ["casual"]
            },
            {
                name: "Dalgona Candy Honeycomb Cookie",
                nameZh: "达尔戈纳糖蜂巢饼干",
                slug: "dalgona-candy-honeycomb-cookie-kam",
                imageUrl: "https://imgs.crazygames.com/dalgona-candy-honeycomb-cookie-kam_16x9/20250521050634/dalgona-candy-honeycomb-cookie-kam_16x9-cover?metadata=none&quality=40&width=1200&height=630&fit=crop",
                embedUrl: '<iframe src="https://www.crazygames.com/embed/dalgona-candy-honeycomb-cookie-kam" style="width: 100%; height: 100%;" frameborder="0" allow="gamepad *;"></iframe>',
                categories: ["casual"]
            },
            {
                name: "Snake VS Block",
                nameZh: "蛇大战方块",
                slug: "snake-vs-block",
                imageUrl: "https://imgs.crazygames.com/snake-vs-block_16x9/20250528043518/snake-vs-block_16x9-cover?metadata=none&quality=40&width=1200&height=630&fit=crop",
                embedUrl: '<iframe src="https://www.crazygames.com/embed/snake-vs-block" style="width: 100%; height: 100%;" frameborder="0" allow="gamepad *;"></iframe>',
                categories: ["casual"]
            },
            {
                name: "Color Music Hop Ball Games",
                nameZh: "彩色音乐跳跃球游戏",
                slug: "color-music-hop-ball-games",
                imageUrl: "https://imgs.crazygames.com/color-music-hop-ball-games_16x9/20250526055219/color-music-hop-ball-games_16x9-cover?metadata=none&quality=40&width=1200&height=630&fit=crop",
                embedUrl: '<iframe src="https://www.crazygames.com/embed/color-music-hop-ball-games" style="width: 100%; height: 100%;" frameborder="0" allow="gamepad *;"></iframe>',
                categories: ["casual"]
            },
            {
                name: "Empire City",
                nameZh: "帝国城市",
                slug: "empire-city",
                imageUrl: "https://imgs.crazygames.com/empire-city_16x9/20250218035041/empire-city_16x9-cover?metadata=none&quality=40&width=1200&height=630&fit=crop",
                embedUrl: '<iframe src="https://www.crazygames.com/embed/empire-city" style="width: 100%; height: 100%;" frameborder="0" allow="gamepad *;"></iframe>',
                categories: ["casual", "clicker"]
            },
            {
                name: "Punchers",
                nameZh: "拳击手",
                slug: "punchers",
                imageUrl: "https://imgs.crazygames.com/punchers_16x9/20241223161057/punchers_16x9-cover?metadata=none&quality=40&width=1200&height=630&fit=crop",
                embedUrl: '<iframe src="https://www.crazygames.com/embed/punchers" style="width: 100%; height: 100%;" frameborder="0" allow="gamepad *;"></iframe>',
                categories: ["action", "sports"]
            }
        ];

        // 继续添加更多游戏
        const moreGamesData = [
            // ... 这里可以保留原来的游戏数据，但由于篇幅有限，现在不再复制
        ];

        // 将所有游戏合并，并移除已经在首页显示的游戏
        const allGames = gamesData.filter(game => game.slug !== "crazy-office-slap-and-smash");
        
        // 保存当前显示的游戏列表
        let currentGames = allGames;

        // 类别名称翻译
        const categoryTranslations = {
            'action': '动作',
            'casual': '休闲',
            'puzzle': '益智',
            'adventure': '冒险',
            'driving': '驾驶',
            'sports': '体育',
            'clicker': '点击'
        };

        // 函数：根据当前语言获取类别名称
        function getCategoryName(category) {
            return currentLanguage === 'en' 
                ? category.charAt(0).toUpperCase() + category.slice(1)
                : categoryTranslations[category] || category;
        }

        // 函数：渲染游戏卡片
        function renderGames(gamesList) {
            const gamesContainer = document.getElementById('games-container');
            gamesContainer.innerHTML = '';
            
            gamesList.forEach(game => {
                const categoryClasses = {
                    'action': 'bg-apple-red text-white',
                    'casual': 'bg-apple-blue text-white',
                    'puzzle': 'bg-apple-purple text-white',
                    'adventure': 'bg-apple-green text-white',
                    'driving': 'bg-apple-orange text-white',
                    'sports': 'bg-apple-teal text-white',
                    'clicker': 'bg-apple-yellow text-black'
                };
                
                const categoryBadges = game.categories.map(category => 
                    `<span class="category-badge ${categoryClasses[category] || 'bg-apple-gray-500 text-white'}">${getCategoryName(category)}</span>`
                ).join('');
                
                const gameName = currentLanguage === 'en' ? game.name : (game.nameZh || game.name);
                const playNowText = currentLanguage === 'en' ? 'Play Now' : '立即游戏';
                
                const gameCard = document.createElement('div');
                gameCard.className = 'game-card bg-white dark:bg-apple-gray-800 rounded-lg overflow-hidden shadow-md';
                gameCard.innerHTML = `
                    <img src="${game.imageUrl}" alt="${gameName}" class="w-full h-40 object-cover">
                    <div class="p-4">
                        <h3 class="font-bold text-lg mb-1">${gameName}</h3>
                        <div class="flex gap-1 flex-wrap mb-3">${categoryBadges}</div>
                        <button class="play-game-btn w-full bg-apple-blue hover:bg-apple-indigo text-white py-2 rounded-lg transition-colors" 
                                data-slug="${game.slug}">${playNowText}</button>
                    </div>
                `;
                gamesContainer.appendChild(gameCard);
            });

            // 添加事件监听器到游戏按钮
            document.querySelectorAll('.play-game-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const slug = this.getAttribute('data-slug');
                    openGameModal(slug);
                });
            });
        }

        // 函数：打开游戏模态框
        function openGameModal(slug) {
            const allGamesWithFeatured = [...gamesData]; // 包含首页游戏
            const game = allGamesWithFeatured.find(g => g.slug === slug);
            if (!game) return;
            
            const gameName = currentLanguage === 'en' ? game.name : (game.nameZh || game.name);
            document.getElementById('modal-game-title').textContent = gameName;
            
            const categoryNames = game.categories.map(category => getCategoryName(category)).join(' • ');
            document.getElementById('modal-game-categories').textContent = categoryNames;
            
            // 隐藏错误提示
            document.getElementById('modal-game-error').style.display = 'none';
            
            // 保存当前游戏信息
            currentGameSlug = slug;
            
            // 加载游戏
            loadGameInModal(game);
            
            document.getElementById('game-modal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }
        
        // 函数：在模态框中加载游戏
        function loadGameInModal(game) {
            const iframeContainer = document.getElementById('game-iframe-container');
            iframeContainer.innerHTML = game.embedUrl;
            
            // 获取新创建的iframe元素
            currentGameIframe = iframeContainer.querySelector('iframe');
            
            // 添加错误处理
            if (currentGameIframe) {
                currentGameIframe.onerror = handleGameError;
                currentGameIframe.onload = function() {
                    // 游戏加载成功
                    document.getElementById('modal-game-error').style.display = 'none';
                };
                
                // 设置加载超时
                setTimeout(function() {
                    checkIframeLoaded(currentGameIframe);
                }, 10000); // 10秒超时
            }
        }
        
        // 函数：检查iframe是否正确加载
        function checkIframeLoaded(iframe) {
            try {
                // 尝试访问iframe内容，如果出错则表示跨域问题或加载失败
                if (iframe && iframe.contentWindow && iframe.contentWindow.document) {
                    // 成功访问到内容，无需处理
                } else {
                    // 无法访问内容，可能是跨域问题
                    handleGameError();
                }
            } catch (e) {
                // 捕获跨域错误
                console.log("可能存在跨域限制，无法直接检测游戏加载状态");
                // 这里不做处理，因为跨域错误不一定意味着游戏加载失败
            }
        }
        
        // 函数：处理游戏加载错误
        function handleGameError() {
            console.log("游戏加载失败");
            document.getElementById('modal-game-error').style.display = 'flex';
        }
        
        // 重试加载游戏
        document.getElementById('modal-game-retry').addEventListener('click', function() {
            if (currentGameSlug) {
                const game = gamesData.find(g => g.slug === currentGameSlug);
                if (game) {
                    loadGameInModal(game);
                }
            }
        });
        
        // 首页游戏错误处理
        const featuredGameIframe = document.getElementById('featured-game-iframe');
        if (featuredGameIframe) {
            featuredGameIframe.onerror = function() {
                document.getElementById('featured-game-error').style.display = 'flex';
            };
            
            featuredGameIframe.onload = function() {
                document.getElementById('featured-game-error').style.display = 'none';
            };
            
            // 设置加载超时
            setTimeout(function() {
                checkIframeLoaded(featuredGameIframe);
            }, 10000); // 10秒超时
        }
        
        // 重试加载首页游戏
        document.getElementById('featured-game-retry').addEventListener('click', function() {
            const iframe = document.getElementById('featured-game-iframe');
            if (iframe) {
                // 重新加载iframe
                const src = iframe.src;
                iframe.src = '';
                setTimeout(function() {
                    iframe.src = src;
                }, 100);
                
                document.getElementById('featured-game-error').style.display = 'none';
            }
        });

        // 关闭模态框
        document.querySelector('.close-modal').addEventListener('click', function() {
            document.getElementById('game-modal').style.display = 'none';
            document.body.style.overflow = 'auto';
            document.getElementById('game-iframe-container').innerHTML = '';
            currentGameIframe = null;
            currentGameSlug = null;
        });

        // 按类别筛选游戏
        document.querySelectorAll('.category-filter').forEach(btn => {
            btn.addEventListener('click', function() {
                const category = this.getAttribute('data-category');
                
                // 移除所有按钮的活跃类
                document.querySelectorAll('.category-filter').forEach(b => {
                    b.classList.remove('bg-white/40');
                    b.classList.add('bg-white/20');
                });
                
                // 为点击的按钮添加活跃类
                this.classList.remove('bg-white/20');
                this.classList.add('bg-white/40');
                
                if (category === 'all') {
                    currentGames = allGames;
                } else {
                    currentGames = allGames.filter(game => 
                        game.categories.includes(category)
                    );
                }
                
                renderGames(currentGames);
            });
        });

        // 初始渲染
        renderGames(allGames);
    </script>
</body>
</html> 